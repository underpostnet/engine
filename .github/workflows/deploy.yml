name: SSH Deploy
on: [push]
jobs:
  deployment:
    ## ${{ github.event.workflow_run.head_commit.message }} git automatically commits
    if: github.event.head_commit.message == 'deploy'
    name: Build
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to server
        # You may pin to the exact commit or the version.
        # uses: D3rHase/ssh-command-action@a2d33a241057592ef36e4e552ff44485201acf10
        uses: D3rHase/ssh-command-action@latest
        with:
          # hostname / IP of the server
          host: ${{ secrets.SSH_HOST }}
          # ssh port of the server
          # port: # optional, default is 22
          # user of the server
          user: ${{ secrets.USERNAME }}
          # private ssh key registered on the server
          private_key: ${{ secrets.SSH_PASSWORD }}
          # Fingerprint of the server, preventing man-in-the-middle attacks
          # host_fingerprint: # optional
          # command to be executed
          command: |
            pwd
            ls -a
            pm2 list
