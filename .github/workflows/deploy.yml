name: Deploy to Server
on: [push]
jobs:
  build:
    if: github.event.head_commit.message == 'deploy'
    name: Build
    runs-on: ubuntu-latest
    steps:
      - name: Executing remote ssh commands to deploy
        uses: easingthemes/ssh-deploy@main
        with:
          SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIV_KEY }}
          # ARGS: '-rlgoDzvc -i --delete'
          # SOURCE: 'dist/'
          REMOTE_HOST: ${{ secrets.SSH_HOST }}
          REMOTE_USER: ${{ secrets.SSH_USERNAME }}
          SCRIPT_BEFORE: |
            pwd
            ls -a
            pm2 list
          # TARGET: ${{ secrets.REMOTE_TARGET }}
          # EXCLUDE: '/dist/, /node_modules/'
          # uses: appleboy/ssh-action@v1.1.0
          # with:
          #   host: ${{ secrets.SSH_HOST }}
          #   username: ${{ secrets.SSH_USERNAME }}
          #   password: ${{ secrets.SSH_PASSWORD }}
          #   key: ${{ secrets.SSH_PUB_KEY }}
          #   # port: ${{ secrets.SSH_PORT }}
          #   script: |
          #     pwd
          #     ls -a
          #     pm2 list
